{"title":"Exploratory Data Analysis","markdown":{"yaml":{"title":"Exploratory Data Analysis","editor_options":{"chunk_output_type":"inline"}},"headingText":"Plot of New York City Arrests","containsRefs":false,"markdown":"\n\n```{r setup, include = FALSE}\nlibrary(reticulate)\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggplot2)\nlibrary(forecast)\nlibrary(TSstudio)\nlibrary(tseries)\nlibrary(gridExtra)\n```\n\n\n```{r load_data, include = FALSE}\nload(\"arrest_data.Rdata\")\n```\n\n## Initial Visualization\n\n```{r initial_viz, warning=FALSE}\narrests_by_date <- df %>%\n  group_by(month = floor_date(arrest_date, \"month\")) %>%\n  summarize(count = n())\n\np1 <- ggplot(data = arrests_by_date, aes(x = month, y = count)) +\n  geom_line() +\n  ggtitle(\"Arrests in New York City by Date\") +\n  xlab(\"Arrest Date\") +\n  ylab(\"Arrests\") +\n  theme(\n    panel.grid.major = element_line(color = \"grey\", size = 0.5),\n    panel.grid.minor = element_line(color = \"grey\", size = 0.2)\n  ) +\n  scale_x_date(date_breaks = \"1 year\",\n               date_labels = \"%Y\")\n\np1\n```\n\nThere appears to be some seasonality in the plot, as there are noticeable dips in arrest rate towards the end of each year. There was a slight upward trend towards the end of the 2000's but that changed dramatically during the 2010's into a clear downward trend. Since the start of the current decade the trend has reversed course, however. It is hard to tell if the time series is multiplicative or additive, as it seems to hold different characteristics at different points, though this possibly suggests a multiplicative time series. The change in trend could also be part of a longer cycle, though it is impossible to tell from this graph as it only goes back to 2006.\n\n## Lag Plot\n\n```{r lag_plots}\narrests_ts <- ts(arrests_by_date$count, start = c(2006, 1), frequency = 12)\n\nts_lags(arrests_ts, lags = 1:12)\n```\n\nLooking at the lag plot up to a lag of 12 months, we can see that the data are clearly not random, as a linear shape exists in each lag that we observe here. Seasonality is harder to observe here, as each month does not appear to be clustered alongside other observations of the same month. This could be due to the large number of points, however.\n\n```{r lag_48}\n\nts_lags(arrests_ts, lags = c(12, 24, 36, 48))\n```\n\nIf we look up to a lag of 48 months, we can see that as the lag increases, the data get more random. The Lag 48 plot exhibiting less of a linear pattern than the lag 12 plot, which is fairly linear.\n\n## Decomposition\n\n```{r decomposing}\nplot(decompose(arrests_ts, \"multiplicative\"))\n\n```\n\nWe can see the trend here that we were able to observe on the initial graph. There is horizontal movement during the first half of the observed period and then a clear downward trend until 2020. After that, it reverses and increases until the present day.\n\nRemoving the trend allows us to see some seasonality. Once the seasonality has been averaged out as it has been here, the clear dips in arrests towards the end of each year remain and there is a clear pattern between the large dips at the end of each month.\n\nThere seems to be more noise in the more recent data, which could be something interesting to look into.\n\n## ACF and PACF\n\n```{r acf}\nggAcf(arrests_ts, 100) + ggtitle(\"ACF Plot for Annual New York City Arrests\")\n```\n\nThe ACF values are decaying towards zero as lag increases, which is evidence against seasonality.\n\n```{r pacf}\nggPacf(arrests_ts, 100) + ggtitle(\"PACF Plot for Annual New York City Arrests\")\n```\n\nSpikes can be seen at lags of 1, 12, and 13.\n\n## Augmented Dickey-Fuller Test\n\n```{r adf}\nadf.test(arrests_ts)\n```\n\nThe ADF tests returns a p-value of 0.26, meaning we do not have enough evidence to reject the null hypotheses. This series is not stationary.\n\n## Detrend and Difference\n\n```{r detrend_and_difference}\ndetrend <- resid(lm(arrests_by_date$count ~ arrests_by_date$month, na.action = NULL))\ndifference <- diff(arrests_ts)\n\n```\n\n```{r multifigure_1}\ngrid.arrange(autoplot(arrests_ts),\n             autoplot(as.ts(detrend)), \n             autoplot(difference), \n             ncol = 1)\n```\n\nThe detrended series (the middle plot) does not seem to be vastly different from the original series. This could be evidence that there is not much of a trend in the data. The differenced series looks to be stationary, which suggests that there may be a trend.\n\n```{r multifigure_2}\nggtsdisplay(difference)\n```\n\nThis ACF has positive spikes at 12, 24, and 36, meaning once the trend is removed, the seasonality becomes evident. The ACF of the differenced time series provides strong evidence in support of seasonality.\n","srcMarkdownNoYaml":"\n\n```{r setup, include = FALSE}\nlibrary(reticulate)\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggplot2)\nlibrary(forecast)\nlibrary(TSstudio)\nlibrary(tseries)\nlibrary(gridExtra)\n```\n\n# Plot of New York City Arrests\n\n```{r load_data, include = FALSE}\nload(\"arrest_data.Rdata\")\n```\n\n## Initial Visualization\n\n```{r initial_viz, warning=FALSE}\narrests_by_date <- df %>%\n  group_by(month = floor_date(arrest_date, \"month\")) %>%\n  summarize(count = n())\n\np1 <- ggplot(data = arrests_by_date, aes(x = month, y = count)) +\n  geom_line() +\n  ggtitle(\"Arrests in New York City by Date\") +\n  xlab(\"Arrest Date\") +\n  ylab(\"Arrests\") +\n  theme(\n    panel.grid.major = element_line(color = \"grey\", size = 0.5),\n    panel.grid.minor = element_line(color = \"grey\", size = 0.2)\n  ) +\n  scale_x_date(date_breaks = \"1 year\",\n               date_labels = \"%Y\")\n\np1\n```\n\nThere appears to be some seasonality in the plot, as there are noticeable dips in arrest rate towards the end of each year. There was a slight upward trend towards the end of the 2000's but that changed dramatically during the 2010's into a clear downward trend. Since the start of the current decade the trend has reversed course, however. It is hard to tell if the time series is multiplicative or additive, as it seems to hold different characteristics at different points, though this possibly suggests a multiplicative time series. The change in trend could also be part of a longer cycle, though it is impossible to tell from this graph as it only goes back to 2006.\n\n## Lag Plot\n\n```{r lag_plots}\narrests_ts <- ts(arrests_by_date$count, start = c(2006, 1), frequency = 12)\n\nts_lags(arrests_ts, lags = 1:12)\n```\n\nLooking at the lag plot up to a lag of 12 months, we can see that the data are clearly not random, as a linear shape exists in each lag that we observe here. Seasonality is harder to observe here, as each month does not appear to be clustered alongside other observations of the same month. This could be due to the large number of points, however.\n\n```{r lag_48}\n\nts_lags(arrests_ts, lags = c(12, 24, 36, 48))\n```\n\nIf we look up to a lag of 48 months, we can see that as the lag increases, the data get more random. The Lag 48 plot exhibiting less of a linear pattern than the lag 12 plot, which is fairly linear.\n\n## Decomposition\n\n```{r decomposing}\nplot(decompose(arrests_ts, \"multiplicative\"))\n\n```\n\nWe can see the trend here that we were able to observe on the initial graph. There is horizontal movement during the first half of the observed period and then a clear downward trend until 2020. After that, it reverses and increases until the present day.\n\nRemoving the trend allows us to see some seasonality. Once the seasonality has been averaged out as it has been here, the clear dips in arrests towards the end of each year remain and there is a clear pattern between the large dips at the end of each month.\n\nThere seems to be more noise in the more recent data, which could be something interesting to look into.\n\n## ACF and PACF\n\n```{r acf}\nggAcf(arrests_ts, 100) + ggtitle(\"ACF Plot for Annual New York City Arrests\")\n```\n\nThe ACF values are decaying towards zero as lag increases, which is evidence against seasonality.\n\n```{r pacf}\nggPacf(arrests_ts, 100) + ggtitle(\"PACF Plot for Annual New York City Arrests\")\n```\n\nSpikes can be seen at lags of 1, 12, and 13.\n\n## Augmented Dickey-Fuller Test\n\n```{r adf}\nadf.test(arrests_ts)\n```\n\nThe ADF tests returns a p-value of 0.26, meaning we do not have enough evidence to reject the null hypotheses. This series is not stationary.\n\n## Detrend and Difference\n\n```{r detrend_and_difference}\ndetrend <- resid(lm(arrests_by_date$count ~ arrests_by_date$month, na.action = NULL))\ndifference <- diff(arrests_ts)\n\n```\n\n```{r multifigure_1}\ngrid.arrange(autoplot(arrests_ts),\n             autoplot(as.ts(detrend)), \n             autoplot(difference), \n             ncol = 1)\n```\n\nThe detrended series (the middle plot) does not seem to be vastly different from the original series. This could be evidence that there is not much of a trend in the data. The differenced series looks to be stationary, which suggests that there may be a trend.\n\n```{r multifigure_2}\nggtsdisplay(difference)\n```\n\nThis ACF has positive spikes at 12, 24, and 36, meaning once the trend is removed, the seasonality becomes evident. The ACF of the differenced time series provides strong evidence in support of seasonality.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"exploratory_data_analysis.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","editor":"visual","theme":"litera","fontsize":"1em","title":"Exploratory Data Analysis","editor_options":{"chunk_output_type":"inline"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}