add_trace(data = arrests_by_crime,
x = ~month,
y = ~MARIJUANA, POSSESSION 4 & 5,
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~ASSAULT_3,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~"MARIJUANA, POSSESSION 4 & 5",
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE)
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~"ASSAULT 3",
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~"MARIJUANA, POSSESSION 4 & 5",
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = as.Date(sprintf("%04d-%02d", year, month))) %>%
ungroup() %>%
select(-year)
mutate(month = as.Date(paste(year, month, sep = "-")) %>%
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = as.Date(paste(year, month, sep = "-"))) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = paste(year, month, sep = "-")) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = as.Date(paste(year, month, sep = "-"), format = "%Y-%m")) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = as.Date(paste(year, month, sep = "-"), format = "%y-%m")) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = paste(year, month, sep = "-")) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- arrests_by_crime %>%
mutate(month = as.Date(month, format = "%Y-%m"))
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = paste(year, month, sep = "-")) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = sprintf("%04d-%02d", year, month)) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- arrests_by_crime %>%
mutate(month = as.Date(month, format = "%Y-%m"))
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = sprintf("%04d-%02d", year, month)) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- arrests_by_crime %>%
mutate(month = as.Date(month, format = "%Y-%m"))
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = sprintf("%04d-%02d", year, month)) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- arrests_by_crime %>%
mutate(month = as.Date(month, format = "%Y-%m-%d"))
arrests_by_crime <- arrests_by_crime %>%
mutate(month = as.Date(month))
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = sprintf("%04d-%02d", year, month)) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- df %>%
group_by(year, month, pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
mutate(month = sprintf("%04d-%02d", year, month)) %>%
ungroup() %>%
select(-year)
arrests_by_crime <- arrests_by_crime %>%
mutate(month = as.Date(month))
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup()
View(arrests_by_date)
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup()%>%
mutate(month = as.Date(month, format = "%Y-%m"))
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup()
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~"ASSAULT 3",
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~"MARIJUANA, POSSESSION 4 & 5",
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE)
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup() %>%
mutate(month = as.Date(month, format = "%Y-%m-%d"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~"ASSAULT 3",
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~"MARIJUANA, POSSESSION 4 & 5",
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE)
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup() %>%
mutate(month = as.Date(month))
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup()
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~"ASSAULT 3",
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~"MARIJUANA, POSSESSION 4 & 5",
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE)
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 3`,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`MARIJUANA, POSSESSION 4 & 5`,
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE)
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 3`,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`MARIJUANA, POSSESSION 4 & 5`,
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~theft_of_services,
#           name = "Theft of Services, Unclassified",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`CONTROLLED SUBSTANCE, POSSESSION 7`,
name = "Controlled Substance Possession 7",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~ny_state_unclassified,
#           name = "NY State Unclassified Violation",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 2,1,UNCLASSIFIED`,
name = "Assault 2, 1, or Unclassified",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = ""),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 3`,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`MARIJUANA, POSSESSION 4 & 5`,
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~theft_of_services,
#           name = "Theft of Services, Unclassified",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`CONTROLLED SUBSTANCE, POSSESSION 7`,
name = "Controlled Substance Possession 7",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~ny_state_unclassified,
#           name = "NY State Unclassified Violation",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 2,1,UNCLASSIFIED`,
name = "Assault 2, 1, or Unclassified",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`LARCENY,PETIT FROM OPEN AREAS,UNCLASSIFIED`,
name = "Larceny, Petit",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = ""),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 3`,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`MARIJUANA, POSSESSION 4 & 5`,
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~theft_of_services,
#           name = "Theft of Services, Unclassified",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`CONTROLLED SUBSTANCE, POSSESSION 7`,
name = "Controlled Substance Possession 7",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~ny_state_unclassified,
#           name = "NY State Unclassified Violation",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 2,1,UNCLASSIFIED`,
name = "Assault 2, 1, or Unclassified",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`LARCENY,PETIT FROM OPEN AREAS,UNCLASSIFIED`,
name = "Larceny, Petit",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`INTOXICATED DRIVING,ALCOHOL`,
name = "Larceny, Petit",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = ""),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 3`,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`MARIJUANA, POSSESSION 4 & 5`,
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~theft_of_services,
#           name = "Theft of Services, Unclassified",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`CONTROLLED SUBSTANCE, POSSESSION 7`,
name = "Controlled Substance Possession 7",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~ny_state_unclassified,
#           name = "NY State Unclassified Violation",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 2,1,UNCLASSIFIED`,
name = "Assault 2, 1, or Unclassified",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`LARCENY,PETIT FROM OPEN AREAS,UNCLASSIFIED`,
name = "Larceny, Petit",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`INTOXICATED DRIVING,ALCOHOL`,
name = "Inoxicated Driving, Alcohol",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = ""),
yaxis = list(title = "Arrests"))
arrests_by_crime <- df %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup()
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 3`,
name = "Assault 3",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`MARIJUANA, POSSESSION 4 & 5`,
name = "Marijuana Possesion 4, 5",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~theft_of_services,
#           name = "Theft of Services, Unclassified",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`CONTROLLED SUBSTANCE, POSSESSION 7`,
name = "Controlled Substance Possession 7",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
# add_trace(data = arrests_by_crime,
#           x = ~month,
#           y = ~ny_state_unclassified,
#           name = "NY State Unclassified Violation",
#           type = "scatter",
#           mode = "lines",
#       showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`ASSAULT 2,1,UNCLASSIFIED`,
name = "Assault 2, 1, or Unclassified",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`LARCENY,PETIT FROM OPEN AREAS,UNCLASSIFIED`,
name = "Larceny, Petit",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`INTOXICATED DRIVING,ALCOHOL`,
name = "Inoxicated Driving, Alcohol",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~`WEAPONS, POSSESSION, ETC`,
name = "Weapons Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = ""),
yaxis = list(title = "Arrests"))
```{r arrests_by_crime, echo = FALSE}
library(reticulate)
library(tidyverse)
library(lubridate)
library(plotly)
library(kableExtra)
use_condaenv("r-env", required = TRUE)
reticulate::repl_python()
