mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~larceny,
name = "Larceny",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~motor_vehicle_theft,
name = "Motor Vehicle Theft",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_possession,
name = "Marijuana Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_sale,
name = "Marijuana Sale",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_possession,
name = "Controlled Substance Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_sale,
name = "Controlled Substance Sale/Intent",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = "",
type = "date"),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~murder,
name = "Murder",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~assault,
name = "Assault",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~robbery,
name = "Robbery",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~larceny,
name = "Larceny",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~motor_vehicle_theft,
name = "Motor Vehicle Theft",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_possession,
name = "Marijuana Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_sale,
name = "Marijuana Sale",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_possession,
name = "Controlled Substance Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_sale,
name = "Controlled Substance Sale/Intent",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = "",
range = c("2005, 2023")),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~murder,
name = "Murder",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~assault,
name = "Assault",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~robbery,
name = "Robbery",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~larceny,
name = "Larceny",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~motor_vehicle_theft,
name = "Motor Vehicle Theft",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_possession,
name = "Marijuana Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_sale,
name = "Marijuana Sale",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_possession,
name = "Controlled Substance Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_sale,
name = "Controlled Substance Sale/Intent",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = "",
range = c("2005", "2023")),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~murder,
name = "Murder",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~assault,
name = "Assault",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~robbery,
name = "Robbery",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~larceny,
name = "Larceny",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~motor_vehicle_theft,
name = "Motor Vehicle Theft",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_possession,
name = "Marijuana Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_sale,
name = "Marijuana Sale",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_possession,
name = "Controlled Substance Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_sale,
name = "Controlled Substance Sale/Intent",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = "",
tickvals = c("2006", "2010", "2014", "2018", "2022")),
yaxis = list(title = "Arrests"))
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~murder,
name = "Murder",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~assault,
name = "Assault",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~robbery,
name = "Robbery",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~larceny,
name = "Larceny",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~motor_vehicle_theft,
name = "Motor Vehicle Theft",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_possession,
name = "Marijuana Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_sale,
name = "Marijuana Sale",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_possession,
name = "Controlled Substance Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_sale,
name = "Controlled Substance Sale/Intent",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = "",
tickvals = c("2006", "2010", "2014", "2018", "2022"),
ticktext = c("2006", "2010", "2014", "2018", "2022")),
yaxis = list(title = "Arrests"))
library(reticulate)
library(tidyverse)
library(lubridate)
library(plotly)
library(kableExtra)
use_condaenv("r-env", required = TRUE)
load("raw_data.Rdata")
reticulate::repl_python()
df <- df %>%
mutate(arrest_date = as.Date(arrest_date, format = "%m/%d/%Y"),
month = month(arrest_date),
year = year(arrest_date))
arrests_by_date <- df %>%
group_by(month = floor_date(arrest_date, "month")) %>%
summarize(total = n())
arrests_plot <- ggplot(data = arrests_by_date, aes(x = month, y = total)) +
geom_line() +
ggtitle("Arrests in New York City by Date") +
xlab("Arrest Date") +
ylab("Arrests")
arrests_plot
arrests_by_crime_detail <- df %>%
filter(pd_desc = str_detect(pd_desc, "ASSAULT|ROBBERY|MARIJUANA, POSSESSION|MARIJUANA, SALE|CE,P|NCE, PE,I|CE, I|E,S|E, S|MURDER,UNCLASSIFIED|AUTO|LARCENY")) %>% group_by(pd_desc) %>%
summarize(total = n())
arrests_by_crime_detail <- df %>%
filter(pd_desc == str_detect(pd_desc, "ASSAULT|ROBBERY|MARIJUANA, POSSESSION|MARIJUANA, SALE|CE,P|NCE, PE,I|CE, I|E,S|E, S|MURDER,UNCLASSIFIED|AUTO|LARCENY")) %>% group_by(pd_desc) %>%
summarize(total = n())
View(arrests_by_crime_detail)
arrests_by_crime_detail <- df %>%
filter(pd_desc == str_detect(pd_desc, "ASSAULT|ROBBERY")) %>% group_by(pd_desc) %>%
summarize(total = n())
arrests_by_crime_detail <- df %>%
filter(pd_desc == str_detect(pd_desc, "ASSAULT")) %>% group_by(pd_desc) %>%
summarize(total = n())
arrests_by_crime_detail <- df %>%
filter(pd_desc == str_detect(pd_desc, "ASSAULT"))
View(arrests_by_crime_detail)
View(df)
arrests_by_crime_detail <- df %>%
filter(str_detect(pd_desc, "ASSAULT")) %>%
group_by(pd_desc) %>%
summarize(total = n())
arrests_by_crime_detail <- df %>%
filter(str_detect(pd_desc, "ASSAULT|ROBBERY|MARIJUANA, POSSESSION|MARIJUANA, SALE|CE,P|NCE, PE,I|CE, I|E,S|E, S|MURDER,UNCLASSIFIED|AUTO|LARCENY")) %>% group_by(pd_desc) %>%
summarize(total = n())
arrests_by_crime_detail
arrests_by_crime
arrests_by_crime <- df %>%
mutate(pd_desc = ifelse(str_detect(pd_desc, "ASSAULT"), "assault",
ifelse(str_detect(pd_desc, "ROBBERY"), "robbery",
ifelse(str_detect(pd_desc, "MARIJUANA, POSSESSION"), "marijuana_possession",
ifelse(str_detect(pd_desc, "MARIJUANA, SALE"), "marijuana_sale",
ifelse(str_detect(pd_desc, "CE,P|NCE, P"), "controlled_substance_possession",
ifelse(str_detect(pd_desc, "E,I|CE, I|E,S|E, S"), "controlled_substance_sale",
ifelse(str_detect(pd_desc, "MURDER,UNCLASSIFIED"), "murder",
ifelse(str_detect(pd_desc, "AUTO"), "motor_vehicle_theft",
ifelse(str_detect(pd_desc, "LARCENY"), "larceny", pd_desc)))))))))) %>%
group_by(pd_desc) %>%
summarize(total = n()) %>%
filter(str_detect(pd_desc, "assault|robbery|marijuana_possession|marijuana_sale|controlled|substance_possession|controlled_substance_sale|murder|motor_vehicle_theft|larceny"))
kable(arrests_by_crime)
arrests_by_crime
library(reticulate)
library(tidyverse)
library(lubridate)
library(plotly)
library(kableExtra)
use_condaenv("r-env", required = TRUE)
load("raw_data.Rdata")
reticulate::repl_python()
df <- df %>%
mutate(arrest_date = as.Date(arrest_date, format = "%m/%d/%Y"),
month = month(arrest_date),
year = year(arrest_date))
arrests_by_date <- df %>%
group_by(month = floor_date(arrest_date, "month")) %>%
summarize(total = n())
arrests_plot <- ggplot(data = arrests_by_date, aes(x = month, y = total)) +
geom_line() +
ggtitle("Arrests in New York City by Date") +
xlab("Arrest Date") +
ylab("Arrests")
arrests_plot
arrests_by_crime <- df %>%
mutate(pd_desc = ifelse(str_detect(pd_desc, "ASSAULT"), "assault",
ifelse(str_detect(pd_desc, "ROBBERY"), "robbery",
ifelse(str_detect(pd_desc, "MARIJUANA, POSSESSION"), "marijuana_possession",
ifelse(str_detect(pd_desc, "MARIJUANA, SALE"), "marijuana_sale",
ifelse(str_detect(pd_desc, "CE,P|NCE, P"), "controlled_substance_possession",
ifelse(str_detect(pd_desc, "E,I|CE, I|E,S|E, S"), "controlled_substance_sale",
ifelse(str_detect(pd_desc, "MURDER,UNCLASSIFIED"), "murder",
ifelse(str_detect(pd_desc, "AUTO"), "motor_vehicle_theft",
ifelse(str_detect(pd_desc, "LARCENY"), "larceny", pd_desc)))))))))) %>%
group_by(pd_desc) %>%
summarize(total = n()) %>%
filter(str_detect(pd_desc, "assault|robbery|marijuana_possession|marijuana_sale|controlled|substance_possession|controlled_substance_sale|murder|motor_vehicle_theft|larceny"))
kable(arrests_by_crime)
arrests_by_crime
arrests_by_crime_detail <- df %>%
filter(str_detect(pd_desc, "ASSAULT|ROBBERY|MARIJUANA, POSSESSION|MARIJUANA, SALE|CE,P|NCE, PE,I|CE, I|E,S|E, S|MURDER,UNCLASSIFIED|AUTO|LARCENY")) %>% group_by(pd_desc) %>%
summarize(total = n())
arrests_by_crime_detail
arrests_by_crime <- df %>%
mutate(pd_desc = ifelse(str_detect(pd_desc, "ASSAULT"), "assault",
ifelse(str_detect(pd_desc, "ROBBERY"), "robbery",
ifelse(str_detect(pd_desc, "MARIJUANA, POSSESSION"), "marijuana_possession",
ifelse(str_detect(pd_desc, "MARIJUANA, SALE"), "marijuana_sale",
ifelse(str_detect(pd_desc, "CE,P|NCE, P"), "controlled_substance_possession",
ifelse(str_detect(pd_desc, "E,I|CE, I|E,S|E, S"), "controlled_substance_sale",
ifelse(str_detect(pd_desc, "MURDER,UNCLASSIFIED"), "murder",
ifelse(str_detect(pd_desc, "AUTO"), "motor_vehicle_theft",
ifelse(str_detect(pd_desc, "LARCENY"), "larceny", pd_desc)))))))))) %>%
filter(str_detect(pd_desc, "assault|robbery|marijuana_possession|marijuana_sale|controlled|substance_possession|controlled_substance_sale|murder|motor_vehicle_theft|larceny")) %>%
group_by(month = floor_date(arrest_date, "month"), pd_desc) %>%
summarize(count = n()) %>%
pivot_wider(names_from = pd_desc, values_from = count, values_fill = 0) %>%
ungroup()
plot_ly(data = arrests_by_crime,
x = ~month,
y = ~murder,
name = "Murder",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~assault,
name = "Assault",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~robbery,
name = "Robbery",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~larceny,
name = "Larceny",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~motor_vehicle_theft,
name = "Motor Vehicle Theft",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_possession,
name = "Marijuana Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~marijuana_sale,
name = "Marijuana Sale",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_possession,
name = "Controlled Substance Possession",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
add_trace(data = arrests_by_crime,
x = ~month,
y = ~controlled_substance_sale,
name = "Controlled Substance Sale/Intent",
type = "scatter",
mode = "lines",
showlegend = TRUE) %>%
layout(title = "Crime by Type",
xaxis = list(title = "",
tickvals = c("2006", "2010", "2014", "2018", "2022"),
ticktext = c("2006", "2010", "2014", "2018", "2022")),
yaxis = list(title = "Arrests"))
save(list = c("arrests_by_crime", "arrests_by_date"), file = "arrest_data.Rdata")
View(arrests_by_crime)
library(reticulate)
library(tidyverse)
library(lubridate)
library(plotly)
library(kableExtra)
use_condaenv("r-env", required = TRUE)
load("raw_data.Rdata")
reticulate::repl_python()
